import"/src/popup/3rd-party/dexie.js";import"/src/popup/3rd-party/dexie-export-import.js";import"/src/popup/3rd-party/b.js";import"/src/popup/main.js";const handler={async getConfig(e){let t;var r=new Promise(r=>t=r),r=(chrome.storage.local.get(["_cfg"+e],function(r){t(r["_cfg"+e])}),await r);return r},setConfig:async(r,e)=>chrome.storage.local.set({["_cfg"+r]:e},()=>{})};chrome.runtime.onMessage.addListener(function(r,e,t){try{return r._type?"getExtConfig"===r._type?(handler.getConfig(r.id).then(t),!0):"setExtConfig"===r._type?(handler.setConfig(r.id,r.cfg).then(t),!0):void 0:!1}catch(r){return!1}}),self.arrayBufferToBase64=function(r){return r=new Uint8Array(r),btoa(Array.from(r).map(r=>String.fromCharCode(r)).join(""))},self.base64ToArrayBuffer=function(r){r=atob(r);var e=new Uint8Array(r.length),r=function(r,e,t,n){n[t]=r.charCodeAt(t)}.bind(null,r);return e.forEach(r),e.buffer};