import{Panel}from"../components/index.js";const sharedObjectId=window.infoBox.sharedObjectId,sharedObject=window[sharedObjectId],{Component,html,useCallback}=window.neverland,{useSelector,useDispatch,store}=sharedObject.store;function onPosChange(n,e){const t=sharedObject.bgApi,o=useDispatch();o({type:"PANEL:SET_POSITION",payload:{posX:e.posX,posY:e.posY,panelId:n}});e=store.getState().botConfig;t.setConfig(e)}function applyUnits(n){const e=sharedObject.bgApi;e.applyArmyUnits(n)}function getIconUrl(n){const e=sharedObject.bgApi;return e&&e.assetManager&&e.assetManager.getUnitIconUrl?e.assetManager.getUnitIconUrl(n):""}const PanelBody=Component(()=>{const e=useSelector(n=>n).botConfig.armyConfig;return html`<div class="army-buttons">${Object.keys(e).map(n=>html`<button class="unit-btn" onclick=${useCallback(()=>applyUnits({...e[n],caption:n}))}><img src=${getIconUrl(e[n].icon||e[n].units[0])}> <span>${n}</span></button>`)}</div>`}),ArmyPanel=Component(()=>{var n=useSelector(n=>n),e=n.armyPanel["visible"],{posX:t,posY:o}=n.botConfig.armyPanel,{isScriptInited:n,isActive:s}=n.status;return n&&s&&e?html`${Panel({id:"armyPanel",onPosChange:onPosChange.bind(null,"armyPanel"),visible:e,body:PanelBody(),position:{posX:t,posY:o}})}`:""});export default ArmyPanel;