const sharedObjectId=window.infoBox.sharedObjectId,sharedObject=window[sharedObjectId],_=sharedObject.i18n["_"],{Component,html}=window.neverland,{store,useDispatch,useSelector}=sharedObject.store;import{Switch,Card,LabeledInput}from"../components/index.js";const AuctionTab=Component(()=>{var e=useSelector(e=>e),e=(e.botConfig,e.currentAucConfig);return html`<div class="tab-pane fade" id="auction" role="tabpanel" aria-labelledby="auction-tab">${Card(_("main_window.tabs.auc.current"),html`<div class="container" id="currentAuctionField"><div class="row"><div class="col p-1 d-flex align-items-center justify-content-center">${Switch({id:"takeCurrentAuc-switch",label:_("main_window.tabs.auc.keep"),checked:e.hold,handler:currentAucHandler})}</div><div class="col p-1 d-flex align-items-center justify-content-center">${LabeledInput({type:"number",id:"auctionMaxBid-input",label:_("main_window.tabs.auc.max_bid"),value:0,placeholder:"Max Bid",min:0,input:currentAucMaxBidHandler})}</div></div></div>`)}</div>`});async function currentAucHandler(e,t){const n=sharedObject.bgApi;t={...store.getState().currentAucConfig,hold:t};const a=useDispatch();a({type:"BOT:CURRENT_AUCTION_CONFIG_UPDATED",payload:t}),await n.setCurrentAucConfig(t)}let _setCfgTimeout;async function currentAucMaxBidHandler(e,n){const a=sharedObject.bgApi;clearTimeout(_setCfgTimeout),_setCfgTimeout=setTimeout(async function(){const e={...store.getState().currentAucConfig},t=(e.maxBid=Number(n)||0,await a.setCurrentAucConfig(e),useDispatch());t({type:"BOT:CURRENT_AUCTION_CONFIG_UPDATED",payload:e})},1e3)}async function allAuctionsHandler(e,t){const n={...store.getState().botConfig},a=(n.auction.enabled=t,useDispatch());a({type:"BOT:CONFIG_UPDATED",payload:n}),saveConfig()}async function saveConfig(e=!1){const t=sharedObject.bgApi;var n=store.getState()["botConfig"];await t.setConfig(n,e)}export default AuctionTab;